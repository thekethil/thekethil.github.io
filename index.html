<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vellattil Veedu</title>
    <meta name="description" content="Official website of Vellattil Veedu family temple in Kerala">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #ff9933;
            --primary-dark: #e6851f;
            --secondary-color: #2c3e50;
            --text-dark: #2c3e50;
            --text-light: #7f8c8d;
            --bg-light: #f8f9fa;
            --bg-white: #ffffff;
            --border-color: #e9ecef;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            --gradient: linear-gradient(135deg, #ff9933 0%, #ffb366 100%);
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background-color: var(--bg-light);
        }

        /* Header */
        .header {
            background: var(--gradient);
            color: white;
            text-align: center;
            padding: 3rem 2rem;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><defs><radialGradient id="a" cx="50%" cy="50%"><stop offset="0%" stop-color="%23ffffff" stop-opacity="0.1"/><stop offset="100%" stop-color="%23ffffff" stop-opacity="0"/></radialGradient></defs><circle cx="200" cy="300" r="80" fill="url(%23a)"/><circle cx="800" cy="200" r="120" fill="url(%23a)"/><circle cx="600" cy="600" r="60" fill="url(%23a)"/></svg>') no-repeat center;
            background-size: cover;
        }

        .header-content {
            position: relative;
            z-index: 1;
            max-width: 800px;
            margin: 0 auto;
        }

        .header h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            animation: fadeInUp 1s ease;
        }

        .header-subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            font-weight: 300;
            animation: fadeInUp 1s ease 0.3s both;
        }

        /* Navigation */
        .nav {
            background: var(--bg-white);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: center;
            padding: 1rem 2rem;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 3rem;
        }

        .nav-link {
            text-decoration: none;
            color: var(--text-dark);
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-link:hover,
        .nav-link.active {
            color: var(--primary-color);
            background: rgba(255, 153, 51, 0.1);
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Main Content */
        .main-content {
            background: var(--bg-white);
            margin: 2rem auto;
            max-width: 1000px;
            border-radius: 20px;
            box-shadow: var(--shadow-lg);
            overflow: hidden;
        }

        /* Section Styling */
        .section {
            padding: 3rem 3rem;
        }

        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 2rem;
            text-align: center;
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: var(--gradient);
            border-radius: 3px;
        }

        /* Event Section */
        .event-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            border: 1px solid var(--border-color);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
        }

        .event-card:hover {
            transform: translateY(-5px);
        }

        .event-title {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 1.5rem;
        }

        .event-details {
            display: flex;
            justify-content: center;
            gap: 3rem;
            flex-wrap: wrap;
        }

        .event-detail {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-light);
            font-weight: 500;
        }

        .event-icon {
            color: var(--primary-color);
            font-size: 1.2rem;
        }

        /* Photo Gallery */
        .gallery-section {
            background: var(--bg-light);
        }

        .photo-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .photo-item {
            position: relative;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .photo-item:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: var(--shadow-lg);
        }

        .photo-item img {
            width: 100%;
            height: 300px;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .photo-item:hover img {
            transform: scale(1.1);
        }

        .photo-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, transparent 0%, rgba(0, 0, 0, 0.7) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
            display: flex;
            align-items: flex-end;
            padding: 1.5rem;
        }

        .photo-item:hover .photo-overlay {
            opacity: 1;
        }

        .photo-caption {
            color: white;
            font-weight: 500;
        }

        /* Lightbox Modal */
        .lightbox {
            display: none;
            position: fixed;
            z-index: 9999;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            animation: fadeIn 0.3s ease;
        }

        .lightbox-content {
            position: relative;
            margin: auto;
            padding: 20px;
            width: 90%;
            max-width: 800px;
            text-align: center;
            top: 50%;
            transform: translateY(-50%);
        }

        .lightbox img {
            max-width: 100%;
            max-height: 80vh;
            border-radius: 10px;
            box-shadow: var(--shadow-lg);
        }

        .close {
            position: absolute;
            top: 20px;
            right: 35px;
            color: white;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close:hover {
            color: var(--primary-color);
        }

        /* Footer */
        .footer {
            background: var(--secondary-color);
            color: white;
            text-align: center;
            padding: 2rem;
            margin-top: 3rem;
        }

        .footer-content {
            max-width: 800px;
            margin: 0 auto;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.5rem;
            }

            .header-subtitle {
                font-size: 1rem;
            }

            .nav-menu {
                gap: 1rem;
            }

            .section {
                padding: 2rem 1.5rem;
            }

            .main-content {
                margin: 1rem;
                border-radius: 15px;
            }

            .event-details {
                flex-direction: column;
                gap: 1rem;
            }

            .photo-gallery {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .photo-item img {
                height: 250px;
            }

            .container {
                padding: 0 1rem;
            }
        }

        @media (max-width: 480px) {
            .header {
                padding: 2rem 1rem;
            }

            .header h1 {
                font-size: 2rem;
            }

            .section-title {
                font-size: 2rem;
            }

            .event-title {
                font-size: 1.5rem;
            }
        }

        /* Upcoming Poojas Styling */
        .upcoming-poojas-section {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            margin: 2rem 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .pooja-item {
            background: linear-gradient(135deg, #fff3e0 0%, #ffffff 100%);
            border: 1px solid #ffcc80;
            border-radius: 10px;
            padding: 1.5rem;
            margin: 1rem 0;
            transition: transform 0.3s ease;
        }

        .pooja-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(255, 153, 51, 0.2);
        }

        .pooja-item.booked {
            background: linear-gradient(135deg, #f5f5f5 0%, #ffffff 100%);
            border-color: #bdbdbd;
            opacity: 0.8;
        }

        .pooja-item.available {
            background: linear-gradient(135deg, #fff3e0 0%, #ffffff 100%);
            border-color: #ffcc80;
        }

        .pooja-header {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        .days-away {
            color: #666;
            font-size: 0.9rem;
            font-weight: normal;
        }

        .pooja-details {
            color: #555;
            font-size: 1rem;
            line-height: 1.6;
        }

        .pooja-status {
            margin-top: 0.5rem;
            font-weight: 500;
        }

        .pooja-item.available .pooja-status {
            color: #4caf50;
        }

        .pooja-item.booked .pooja-status {
            color: #f44336;
        }

        .loading {
            text-align: center;
            color: var(--text-light);
            font-style: italic;
            padding: 2rem;
        }

        /* Scroll animations */
        .fade-in {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s ease;
        }

        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <h1>Vellattil Veedu</h1>
            <p class="header-subtitle">Sacred heritage of our ancestral family temple</p>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-container">
            <ul class="nav-menu">
                <li><a href="#events" class="nav-link active">Events</a></li>
                <li><a href="#upcoming" class="nav-link">Upcoming Poojas</a></li>
                <li><a href="#gallery" class="nav-link">Photo Gallery</a></li>
                <li><a href="#about" class="nav-link">About</a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Events Section -->
        <section id="events" class="section fade-in">
            <h2 class="section-title">Special Events</h2>
            
            <div class="event-card">
                <h3 class="event-title">Next Pooja Ceremony</h3>
                <div class="event-details" id="event-details-container">
                    <div class="event-detail">
                        <i class="fas fa-calendar-alt event-icon"></i>
                        <span id="next-pooja-date">Loading...</span>
                    </div>
                    <div class="event-detail">
                        <i class="fas fa-map-marker-alt event-icon"></i>
                        <span id="next-pooja-month">Loading...</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Photo Gallery Section -->
        <section id="gallery" class="section gallery-section fade-in">
            <h2 class="section-title">Photo Gallery</h2>
            <p style="text-align: center; color: var(--text-light); margin-bottom: 2rem;">Click on any photo to view in full size</p>
            
            <div class="photo-gallery">
                <div class="photo-item" onclick="openLightbox('images/IMG-20221206-WA0000.jpg')">
                    <img src="images/IMG-20221206-WA0000.jpg" alt="Vellattil Veedu Temple Photo 1">
                    <div class="photo-overlay">
                        <div class="photo-caption">Beautiful moment captured</div>
                    </div>
                </div>
                
                <div class="photo-item" onclick="openLightbox('images/IMG-20221206-WA0002.jpg')">
                    <img src="images/IMG-20221206-WA0002.jpg" alt="Vellattil Veedu Temple Photo 2">
                    <div class="photo-overlay">
                        <div class="photo-caption">Precious memories</div>
                    </div>
                </div>
                
                <div class="photo-item" onclick="openLightbox('images/IMG-20221207-WA0000.jpg')">
                    <img src="images/IMG-20221207-WA0000.jpg" alt="Vellattil Veedu Temple Photo 3">
                    <div class="photo-overlay">
                        <div class="photo-caption">Special celebration</div>
                    </div>
                </div>
                
                <div class="photo-item" onclick="openLightbox('images/IMG-20221207-WA0001.jpg')">
                    <img src="images/IMG-20221207-WA0001.jpg" alt="Vellattil Veedu Temple Photo 4">
                    <div class="photo-overlay">
                        <div class="photo-caption">Joyful times</div>
                    </div>
                </div>
                
                <div class="photo-item" onclick="openLightbox('images/IMG-20221207-WA0002.jpg')">
                    <img src="images/IMG-20221207-WA0002.jpg" alt="Vellattil Veedu Temple Photo 5">
                    <div class="photo-overlay">
                        <div class="photo-caption">Family gathering</div>
                    </div>
                </div>
                
                <div class="photo-item" onclick="openLightbox('images/IMG-20221207-WA0003.jpg')">
                    <img src="images/IMG-20221207-WA0003.jpg" alt="Vellattil Veedu Temple Photo 6">
                    <div class="photo-overlay">
                        <div class="photo-caption">Memorable occasion</div>
                    </div>
                </div>
                
                <div class="photo-item" onclick="openLightbox('images/IMG-20221207-WA0004.jpg')">
                    <img src="images/IMG-20221207-WA0004.jpg" alt="Vellattil Veedu Temple Photo 7">
                    <div class="photo-overlay">
                        <div class="photo-caption">Blessed moments</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Upcoming Poojas Section -->
        <section id="upcoming" class="section fade-in">
            <h2 class="section-title">Upcoming Poojas</h2>
            <div class="upcoming-poojas-section">
                <div id="upcoming-poojas">
                    <!-- Pooja data will be loaded here -->
                    <div class="loading">Loading upcoming poojas...</div>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="section fade-in">
            <h2 class="section-title">About</h2>
            <div style="text-align: center; max-width: 600px; margin: 0 auto;">
                <p style="font-size: 1.1rem; line-height: 1.8; color: var(--text-light);">
                    Welcome to the official website of our ancestral Vellattil Veedu family temple in Kerala. This sacred space has been a cornerstone of our family's spiritual heritage for generations. Here you'll find photos and memories from our temple ceremonies, poojas, and special religious occasions that connect us to our rich cultural traditions and divine blessings.
                </p>
            </div>
        </section>
    </main>

    <!-- Lightbox Modal -->
    <div id="lightbox" class="lightbox" onclick="closeLightbox()">
        <div class="lightbox-content">
            <span class="close" onclick="closeLightbox()">&times;</span>
            <img id="lightbox-img" src="" alt="Full size image">
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2024 Vellattil Veedu. All rights reserved.</p>
            <p style="margin-top: 0.5rem; opacity: 0.8;">Made with ❤️ for preserving beautiful memories</p>
        </div>
    </footer>

    <script>
        // Current date: August 9, 2025
        const TODAY = new Date('2025-08-09');

        // Function to calculate days from today
        function calculateDaysAway(dateString) {
            const poojaDate = new Date(dateString);
            const diffTime = poojaDate - TODAY;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            return diffDays;
        }

        // Function to load and display upcoming poojas
        async function loadUpcomingPoojas() {
            try {
                // Replace 'yourusername/yourrepo' with your actual GitHub repository
                const response = await fetch('https://raw.githubusercontent.com/thekethil/thekethil.github.io/main/data/upcoming-poojas.csv');
                const csvText = await response.text();
                const poojas = parseCSV(csvText);
                
                // Filter and sort upcoming poojas
                const upcoming = poojas
                    .filter(pooja => calculateDaysAway(pooja.Date) >= 0)
                    .sort((a, b) => new Date(a.Date) - new Date(b.Date))
                    .slice(0, 5); // Show next 5 poojas
                
                displayPoojas(upcoming);
            } catch (error) {
                console.error('Error loading pooja data:', error);
                
                // Update error messages for both sections
                document.getElementById('upcoming-poojas').innerHTML = 
                    '<div class="loading">Unable to load pooja dates. Please check back later.</div>';
                    
                document.getElementById('next-pooja-date').textContent = 'Unable to load';
                document.getElementById('next-pooja-month').textContent = 'Data not available';
                
                // Remove any existing status element
                const existingStatus = document.getElementById('next-pooja-status-container');
                if (existingStatus) {
                    existingStatus.remove();
                }
            }
        }

        // Function to display poojas
        function displayPoojas(poojas) {
            const container = document.getElementById('upcoming-poojas');
            if (poojas.length === 0) {
                container.innerHTML = '<div class="loading">No upcoming poojas found.</div>';
                return;
            }

            // Update the event section with the first (next) pooja data
            if (poojas.length > 0) {
                const nextPooja = poojas[0];
                
                // Update all event section fields from CSV data
                const dateElement = document.getElementById('next-pooja-date');
                const monthElement = document.getElementById('next-pooja-month');
                const eventDetailsContainer = document.getElementById('event-details-container');
                
                if (dateElement) {
                    dateElement.textContent = formatDate(nextPooja.Date);
                }
                
                if (monthElement) {
                    monthElement.textContent = nextPooja.Malayalam_Month;
                }
                
                // Remove any existing status element
                const existingStatus = document.getElementById('next-pooja-status-container');
                if (existingStatus) {
                    existingStatus.remove();
                }
                
                // Only add status element if someone is booked
                if (nextPooja.Booked_By && nextPooja.Booked_By.trim() !== '' && eventDetailsContainer) {
                    const statusElement = document.createElement('div');
                    statusElement.className = 'event-detail';
                    statusElement.id = 'next-pooja-status-container';
                    statusElement.innerHTML = `
                        <i class="fas fa-user event-icon"></i>
                        <span style="color: #f44336;">Booked by ${nextPooja.Booked_By}</span>
                    `;
                    eventDetailsContainer.appendChild(statusElement);
                }
            }

            const html = poojas.map(pooja => {
                let statusHtml = '';
                
                // Only show status if someone is booked
                if (pooja.Booked_By && pooja.Booked_By.trim() !== '') {
                    statusHtml = `<div class="pooja-status">🔒 Booked by ${pooja.Booked_By}</div>`;
                }
                
                return `
                    <div class="pooja-item ${pooja.Booked_By && pooja.Booked_By.trim() !== '' ? 'booked' : 'available'}">
                        <div class="pooja-header">
                            🙏 Pooja - ${formatDate(pooja.Date)}
                        </div>
                        <div class="pooja-details">
                            📅 ${pooja.Malayalam_Month}
                            ${statusHtml}
                        </div>
                    </div>
                `;
            }).join('');
            
            container.innerHTML = html;
        }

        // Helper function to parse CSV
        function parseCSV(csvText) {
            const lines = csvText.trim().split('\n');
            const headers = lines[0].split(',');
            
            return lines.slice(1).map(line => {
                const values = line.split(',');
                const obj = {};
                headers.forEach((header, index) => {
                    obj[header] = values[index] || '';
                });
                return obj;
            });
        }

        // Helper function to format date
        function formatDate(dateString) {
            const options = { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                weekday: 'short'
            };
            return new Date(dateString).toLocaleDateString('en-IN', options);
        }

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Active navigation highlighting
        window.addEventListener('scroll', () => {
            const sections = document.querySelectorAll('section[id]');
            const navLinks = document.querySelectorAll('.nav-link');
            
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (scrollY >= sectionTop) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href').substring(1) === current) {
                    link.classList.add('active');
                }
            });
        });

        // Lightbox functionality
        function openLightbox(imageSrc) {
            document.getElementById('lightbox').style.display = 'block';
            document.getElementById('lightbox-img').src = imageSrc;
            document.body.style.overflow = 'hidden';
        }

        function closeLightbox() {
            document.getElementById('lightbox').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Close lightbox with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeLightbox();
            }
        });

        // Scroll animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        document.querySelectorAll('.fade-in').forEach(el => {
            observer.observe(el);
        });

        // Photo gallery animations
        document.querySelectorAll('.photo-item').forEach((item, index) => {
            item.style.animationDelay = `${index * 0.1}s`;
        });

        // Load poojas when page loads
        document.addEventListener('DOMContentLoaded', loadUpcomingPoojas);
    </script>
</body>
</html>
